{% load static %}
<!DOCTYPE html>
<html lang="es" class="h-full">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NODO - Acceso al Sistema</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @keyframes float {
            0%, 100% { transform: translateY(0) scale(1); opacity: 0.5; }
            50% { transform: translateY(-30px) scale(1.2); opacity: 0.8; }
        }
        @keyframes pulse-glow {
            0%, 100% { box-shadow: 0 0 40px rgba(255, 0, 128, 0.3); }
            50% { box-shadow: 0 0 80px rgba(255, 0, 128, 0.5); }
        }
        #canvas {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            opacity: 0.4;
        }
    </style>
</head>
<body class="min-h-screen bg-white flex items-center justify-end p-4 lg:p-8 relative overflow-hidden">
    <!-- Canvas para nodos animados -->
    <canvas id="canvas"></canvas>

    <!-- Círculos animados de fondo -->
    <div class="absolute inset-0 overflow-hidden pointer-events-none">
        <div class="absolute top-1/4 left-1/4 w-96 h-96 rounded-full blur-3xl" style="background: radial-gradient(circle, rgba(255, 0, 128, 0.08) 0%, transparent 70%); animation: float 8s ease-in-out infinite;"></div>
        <div class="absolute bottom-1/4 right-1/4 w-96 h-96 rounded-full blur-3xl" style="background: radial-gradient(circle, rgba(121, 40, 202, 0.08) 0%, transparent 70%); animation: float 8s ease-in-out infinite; animation-delay: 2s;"></div>
        <div class="absolute top-1/2 left-1/2 w-80 h-80 rounded-full blur-3xl" style="background: radial-gradient(circle, rgba(137, 8, 204, 0.06) 0%, transparent 70%); animation: float 10s ease-in-out infinite; animation-delay: 4s;"></div>
        
        <!-- Grid de fondo -->
        <div class="absolute inset-0 bg-[linear-gradient(rgba(255,0,128,0.04)_1px,transparent_1px),linear-gradient(90deg,rgba(255,0,128,0.04)_1px,transparent_1px)] bg-[size:100px_100px]"></div>
    </div>

    <!-- Tarjeta de Login -->
    <div class="w-full max-w-md relative z-10" style="animation: pulse-glow 3s ease-in-out infinite;">
        <div class="bg-white rounded-[15px] border border-[#E5E7EB] overflow-hidden" style="box-shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.1), 0 1px 2px -1px rgba(0, 0, 0, 0.1);">
            <!-- Header -->
            <div class="p-8 text-center border-b border-[#E5E7EB]" style="background: linear-gradient(135deg, #7928CA 0%, #FF0080 100%);">
                <div class="inline-flex items-center justify-center w-16 h-16 bg-white/20 backdrop-blur-sm rounded-2xl mb-4 shadow-lg border border-white/30">
                    <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round" class="text-white">
                        <circle cx="12" cy="12" r="10"></circle>
                        <circle cx="12" cy="12" r="2"></circle>
                    </svg>
                </div>
                <h1 class="text-4xl font-extrabold text-white mb-2 tracking-tighter">Nodo</h1>
                <p class="text-white/90 font-medium text-sm">Sistema Social Conectado</p>
            </div>

            <!-- Form -->
            <div class="p-8">
                <!-- Toggle Login/Registro -->
                <div class="flex gap-2 mb-6 bg-[#F9FAFB] rounded-xl p-1 border border-[#E5E7EB]">
                    <button type="button" id="btnLogin" onclick="toggleMode(true)"
                            class="flex-1 py-2 px-4 rounded-lg transition-all font-medium text-sm tracking-tight text-white shadow-md"
                            style="background: linear-gradient(135deg, #7928CA 0%, #FF0080 100%);">
                        Iniciar Sesión
                    </button>
                    <button type="button" id="btnRegister" onclick="toggleMode(false)"
                            class="flex-1 py-2 px-4 rounded-lg transition-all font-medium text-sm tracking-tight text-[#4A5565] hover:text-[#252F40]">
                        Registrarse
                    </button>
                </div>

                <form method="post" class="space-y-4" id="loginForm">
                    {% csrf_token %}
                    
                    {% if form.errors %}
                    <div class="bg-red-50 border border-red-200 rounded-xl p-4 mb-4">
                        <div class="flex items-center">
                            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-red-500 mr-3">
                                <path d="m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z"></path>
                                <line x1="12" y1="9" x2="12" y2="13"></line>
                                <line x1="12" y1="17" x2="12.01" y2="17"></line>
                            </svg>
                            <p class="text-sm text-red-700 font-medium">Credenciales inválidas</p>
                        </div>
                    </div>
                    {% endif %}

                    <!-- Usuario Input -->
                    <div>
                        <label class="block text-sm font-semibold text-[#252F40] mb-2">Usuario</label>
                        <div class="relative">
                            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="absolute left-4 top-1/2 -translate-y-1/2 text-[#56606A]">
                                <path d="M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2"></path>
                                <circle cx="12" cy="7" r="4"></circle>
                            </svg>
                            <input type="text" 
                                   name="username" 
                                   required
                                   class="w-full pl-12 pr-4 py-3 bg-white border border-[#E5E7EB] rounded-xl text-[#101828] placeholder-[#8C8C8C] focus:outline-none focus:ring-2 focus:ring-[#FF0080] focus:border-transparent transition-all font-normal"
                                   placeholder="Ingrese su usuario">
                        </div>
                    </div>

                    <!-- Password Input -->
                    <div>
                        <label class="block text-sm font-semibold text-[#252F40] mb-2">Contraseña</label>
                        <div class="relative">
                            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="absolute left-4 top-1/2 -translate-y-1/2 text-[#56606A]">
                                <rect x="3" y="11" width="18" height="11" rx="2" ry="2"></rect>
                                <path d="M7 11V7a5 5 0 0 1 10 0v4"></path>
                            </svg>
                            <input type="password" 
                                   name="password" 
                                   id="password"
                                   required
                                   class="w-full pl-12 pr-12 py-3 bg-white border border-[#E5E7EB] rounded-xl text-[#101828] placeholder-[#8C8C8C] focus:outline-none focus:ring-2 focus:ring-[#FF0080] focus:border-transparent transition-all font-normal"
                                   placeholder="••••••••">
                            <button type="button" 
                                    onclick="togglePassword()"
                                    class="absolute right-4 top-1/2 -translate-y-1/2 text-[#56606A] hover:text-[#252F40] transition-colors">
                                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" id="toggleIcon">
                                    <path d="M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z"></path>
                                    <circle cx="12" cy="12" r="3"></circle>
                                </svg>
                            </button>
                        </div>
                    </div>

                    <!-- Forgot Password -->
                    <div class="text-right" id="forgotPassword">
                        <button type="button" class="text-sm font-medium hover:underline transition-colors" style="color: #7928CA;">
                            ¿Olvidaste tu contraseña?
                        </button>
                    </div>

                    <!-- Submit Button -->
                    <button type="submit"
                            class="w-full py-3 text-white rounded-xl font-medium text-base shadow-md hover:shadow-lg transition-all mt-6 hover:scale-[1.02] active:scale-[0.98]"
                            style="background: linear-gradient(135deg, #7928CA 0%, #FF0080 100%);">
                        <span id="submitText">Iniciar Sesión</span>
                    </button>
                </form>

                <!-- Social Login -->
                <div class="mt-6">
                    <div class="relative">
                        <div class="absolute inset-0 flex items-center">
                            <div class="w-full border-t border-[#E5E7EB]"></div>
                        </div>
                        <div class="relative flex justify-center text-sm">
                            <span class="px-4 bg-white text-[#4A5565] font-medium">O continúa con</span>
                        </div>
                    </div>

                    <div class="grid grid-cols-2 gap-3 mt-4">
                        <button type="button"
                                class="py-2 px-4 bg-white border border-[#E5E7EB] rounded-xl text-[#4A5565] hover:bg-[#F9FAFB] hover:border-[#56606A] transition-all font-medium text-sm">
                            Google
                        </button>
                        <button type="button"
                                class="py-2 px-4 bg-white border border-[#E5E7EB] rounded-xl text-[#4A5565] hover:bg-[#F9FAFB] hover:border-[#56606A] transition-all font-medium text-sm">
                            GitHub
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Footer -->
        <p class="text-center text-[#8C8C8C] text-sm mt-6 font-normal">
            Al continuar, aceptas nuestros 
            <button type="button" class="underline hover:text-[#FF0080] transition-colors font-medium">Términos de Servicio</button>
            y 
            <button type="button" class="underline hover:text-[#FF0080] transition-colors font-medium">Política de Privacidad</button>
        </p>
    </div>

    <script>
        // Toggle Login/Register mode
        let isLogin = true;
        function toggleMode(login) {
            isLogin = login;
            const btnLogin = document.getElementById('btnLogin');
            const btnRegister = document.getElementById('btnRegister');
            const submitText = document.getElementById('submitText');
            const forgotPassword = document.getElementById('forgotPassword');
            
            if (login) {
                btnLogin.style.background = 'linear-gradient(135deg, #7928CA 0%, #FF0080 100%)';
                btnLogin.className = 'flex-1 py-2 px-4 rounded-lg transition-all font-medium text-sm tracking-tight text-white shadow-md';
                btnRegister.style.background = '';
                btnRegister.className = 'flex-1 py-2 px-4 rounded-lg transition-all font-medium text-sm tracking-tight text-[#4A5565] hover:text-[#252F40]';
                submitText.textContent = 'Iniciar Sesión';
                forgotPassword.style.display = 'block';
            } else {
                btnRegister.style.background = 'linear-gradient(135deg, #7928CA 0%, #FF0080 100%)';
                btnRegister.className = 'flex-1 py-2 px-4 rounded-lg transition-all font-medium text-sm tracking-tight text-white shadow-md';
                btnLogin.style.background = '';
                btnLogin.className = 'flex-1 py-2 px-4 rounded-lg transition-all font-medium text-sm tracking-tight text-[#4A5565] hover:text-[#252F40]';
                submitText.textContent = 'Crear Cuenta';
                forgotPassword.style.display = 'none';
            }
        }

        // Toggle password visibility
        function togglePassword() {
            const password = document.getElementById('password');
            const icon = document.getElementById('toggleIcon');
            if (password.type === 'password') {
                password.type = 'text';
                icon.innerHTML = '<path d="M17.94 17.94A10.07 10.07 0 0 1 12 20c-7 0-11-8-11-8a18.45 18.45 0 0 1 5.06-5.94M9.9 4.24A9.12 9.12 0 0 1 12 4c7 0 11 8 11 8a18.5 18.5 0 0 1-2.16 3.19m-6.72-1.07a3 3 0 1 1-4.24-4.24"></path><line x1="1" y1="1" x2="23" y2="23"></line>';
            } else {
                password.type = 'password';
                icon.innerHTML = '<path d="M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z"></path><circle cx="12" cy="12" r="3"></circle>';
            }
        }

        // Animated Nodes Network
        const canvas = document.getElementById('canvas');
        const ctx = canvas.getContext('2d');
        
        function resizeCanvas() {
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;
        }
        resizeCanvas();
        window.addEventListener('resize', resizeCanvas);

        // Nodes
        const nodes = [];
        const nodeCount = 30;
        const maxDistance = 150;

        for (let i = 0; i < nodeCount; i++) {
            nodes.push({
                x: Math.random() * canvas.width,
                y: Math.random() * canvas.height,
                vx: (Math.random() - 0.5) * 0.5,
                vy: (Math.random() - 0.5) * 0.5
            });
        }

        function animate() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);

            // Update positions
            nodes.forEach(node => {
                node.x += node.vx;
                node.y += node.vy;

                if (node.x < 0 || node.x > canvas.width) node.vx *= -1;
                if (node.y < 0 || node.y > canvas.height) node.vy *= -1;
            });

            // Draw connections
            for (let i = 0; i < nodes.length; i++) {
                for (let j = i + 1; j < nodes.length; j++) {
                    const dx = nodes[i].x - nodes[j].x;
                    const dy = nodes[i].y - nodes[j].y;
                    const distance = Math.sqrt(dx * dx + dy * dy);

                    if (distance < maxDistance) {
                        const opacity = (1 - distance / maxDistance) * 0.4;
                        
                        const gradient = ctx.createLinearGradient(
                            nodes[i].x, 
                            nodes[i].y,
                            nodes[j].x,
                            nodes[j].y
                        );
                        gradient.addColorStop(0, `rgba(121, 40, 202, ${opacity})`);
                        gradient.addColorStop(1, `rgba(255, 0, 128, ${opacity})`);
                        
                        ctx.beginPath();
                        ctx.moveTo(nodes[i].x, nodes[i].y);
                        ctx.lineTo(nodes[j].x, nodes[j].y);
                        ctx.strokeStyle = gradient;
                        ctx.lineWidth = 1.5;
                        ctx.stroke();
                    }
                }
            }

            // Draw nodes
            nodes.forEach(node => {
                const gradient = ctx.createRadialGradient(node.x, node.y, 0, node.x, node.y, 8);
                gradient.addColorStop(0, 'rgba(255, 0, 128, 0.8)');
                gradient.addColorStop(0.5, 'rgba(121, 40, 202, 0.5)');
                gradient.addColorStop(1, 'rgba(121, 40, 202, 0)');
                
                ctx.beginPath();
                ctx.arc(node.x, node.y, 8, 0, Math.PI * 2);
                ctx.fillStyle = gradient;
                ctx.fill();

                ctx.beginPath();
                ctx.arc(node.x, node.y, 2.5, 0, Math.PI * 2);
                ctx.fillStyle = 'rgba(255, 0, 128, 0.9)';
                ctx.fill();
            });

            requestAnimationFrame(animate);
        }

        animate();
    </script>
</body>
</html>
